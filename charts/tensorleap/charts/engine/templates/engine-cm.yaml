apiVersion: v1
kind: ConfigMap
metadata:
  name: engine-cm
{{ if .Values.global.target_namespace }}
  namespace: {{ .Values.global.target_namespace }}
{{ end }}
data:
  PY_CONFIG: /app/config/config.yaml
{{ if .Values.global.elasticsearch.url }}
  ELASTIC_HOST: {{ .Values.global.elasticsearch.url }}
{{ else }}
  ELASTIC_HOST: http://tl-elasticsearch-es-master:9200
{{ end }}
  SESSION_BUCKET: session
  RABBIT_HOST: rabbitmq.{{ .Release.Namespace }}.svc
  RABBIT_USER: guest
  RABBIT_PASSWORD: guest
  FEEDBACK_TOPIC: feedback
  SUBSCRIBER_TOPIC: job-control-channel
  STORAGE_PROVIDER: minio
  STORAGE_ENDPOINT: tensorleap-minio.{{ .Release.Namespace }}.svc
  STORAGE_PORT: "9000"
  CONTENT_BASE_URL: /session/
  UI_SETTINGS_SCHEMA: '{"N_DATASET_PROCESSES":{"type":"number","title":"Dataset Processes","min":1,"placeholder":"Dataset Processes (automatically)","description":"processes to use for dataset processing"},"N_METRICS_PROCESSES":{"type":"number","title":"Metrics Processes","min":1,"placeholder":"Metrics Processes (automatically)","description":"processes to use for metrics processing"},"N_VISUALIZERS_PROCESSES":{"type":"number","title":"Visualizers Processes","min":1,"placeholder":"Visualizers Processes (automatically)","description":"processes to use for visualizers processing"},"PROCESS_REQUIRED_MEMORY":{"type":"number","title":"Engine Memory Required (GB)","min":1,"placeholder":"Engine Memory Required (GB)","description":"required memory for engine processes"}}'
